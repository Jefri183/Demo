// Data for three sections
const DB_QUIZ = {
    listening: [
    {
        question: "What does the man mean?",
        audio: "../audio/no 1.mp3",
        answer: [
        "The coffee is much better this morning.",
        "He’s feeling bitter this morning.",
        "The coffee isn’t very good.",
        "He cannot taste the butter."
        ],
        correct: 2
    },
    {
        question: "What does the man mean?",
        audio: "../audio/no 2.mp3",
        answer: [
        "The two classes meet in an hour and a half.",
        "The class meets three hours per week.",
        "Each half of the class is an hour long.",
        "Two times a week the class meets for an hour"
        ],
        correct: 1
    },
    {
        question: "What does the woman mean?",
        audio: "../audio/no 3.mp3",
        answer: [
        "A few minutes ago, the flight departed.",
        "The flight will start in a while.",
        "They are frightened about the departure.",
        "The plane is going to take off soon."
        ],
        correct: 3
    },
    {
        question: "What does the man mean?",
        audio: "../audio/no 4.mp3",
        answer: [
        "He hasn’t yet begun his project.",
        "He’s supposed to do his science project next week.",
        "He needs to start working on changing the due date.",
        "He’s been working steadily on his science project."
        ],
        correct: 0
    },
    {
        question: "Where does this conversation probably take place?",
        audio: "../audio/no 5.mp3",
        answer: [
        "At the post office.",
        "In a florist shop.",
        "In a restaurant.",
        "In a hospital delivery room."
        ],
        correct: 1
    },
    {
        question: "What does the man mean?",
        audio: "../audio/no 6.mp3",
        answer: [
        "The professor drowned the cells in a lab.",
        "The topic was presented in a boring way.",
        "The professor divided the lecture into parts.",
        "The biologist tried to sell the results of the experiment."
        ],
        correct: 1
    },
    {
        question: "What does the woman mean?",
        audio: "../audio/no 7.mp3",
        answer: [
        "She needs to get a driver’s license.",
        "It is impossible to cash a check without two pieces of identification.",
        "The man should check to see if he needs credit.",
        "A credit card can be used to get a driver’s license."
        ],
        correct: 1
    },
    {
        question: "What does the man mean?",
        audio: "../audio/no 8.mp3",
        answer: [
        "Housing within his budget is hard to locate.",
        "It’s hard to find his house in New York.",
        "He can’t afford to move his house to New York.",
        "Housing in New York is unavailable."
        ],
        correct: 0
    },
    {
        question: "What does the man mean?",
        audio: "../audio/no 9.mp3",
        answer: [
        "The boss was working on the reports.",
        "He would have to finish the reports before the end of next month.",
        "He was directed to stay late and finish some work.",
        "He could finish the reports at home."
        ],
        correct: 2
    },
    {
        question: "What does the woman mean?",
        audio: "../audio/no 10.mp3",
        answer: [
        "The boisterous students made the teacher mad.",
        "The teacher angered the students with the exam results.",
        "The students were angry that the teacher was around.",
        "The angered students complained to the teacher."
        ],
        correct: 0
    },
    {
        question: "What does the man mean?",
        audio: "../audio/no 11.mp3",
        answer: [
        "The prices are reasonable.",
        "The store is too far out of town.",
        "He would like the woman to repeat what she said.",
        "He agrees with the woman."
        ],
        correct: 3
    },
    {
        question: "What does the man mean?",
        audio: "../audio/no 12.mp3",
        answer: [
        "It has rarely rained this much.",
        "It hardly rained this year.",
        "It is barely raining this year.",
        "It seldom rains so little."
        ],
        correct: 0
    },
    {
        question: "What does professor Martin say about the student?",
        audio: "../audio/no 13.mp3",
        answer: [
        "He needs to do a better job writing questions.",
        "His writing must certainly be improved.",
        "Without the questions, he cannot write the answers.",
        "He needs to understand the written questions better."
        ],
        correct: 1
    },
    {
        question: "What does the man mean?",
        audio: "../audio/no 14.mp3",
        answer: [
        "The agent was standing in line with his passport.",
        "The line to get new passports is very long.",
        "The woman must wait her turn to get her passport checked.",
        "He can check her passport instead of the agent."
        ],
        correct: 2
    },
    {
        question: "What does the woman say about Paul?",
        audio: "../audio/no 15.mp3",
        answer: [
        "He couldn’t finish closing the library book.",
        "He hadn’t finished the library assignment, but he was close.",
        "He was working on the assignment when the library closed.",
        "His homework was incomplete because the library wasn’t open."
        ],
        correct: 3
    },
    {
        question: "What does the man say about Harry?",
        audio: "../audio/no 16.mp3",
        answer: [
        "He sold no magazines.",
        "He sold only one magazine.",
        "He has never sold as many magazines as he sold today.",
        "He sold five magazines at one house."
        ],
        correct: 0
    },
    {
        question: "What does the woman say about the repairs to Frank’s house?",
        audio: "../audio/no 17.mp3",
        answer: [
        "Frank told the contractor to do the work in spite of the cost.",
        "Frank told the contractor that the price was too high.",
        "Frank cannot afford the work on his house.",
        "Frank repaired his own house."
        ],
        correct: 0
    },
    {
        question: "What does the man say he did last night?",
        audio: "../audio/no 18.mp3",
        answer: [
        "He studied last night because he had to.",
        "He tried to study last night, but the material was too hard.",
        "He couldn’t study last night because he was very tired.",
        "He studied last night because he was bored."
        ],
        correct: 2
    },
    {
        question: "What does the woman say about Gloria?",
        audio: "../audio/no 19.mp3",
        answer: [
        "She goes to a movie every year.",
        "She hasn’t gone to a movie yet this year, but last year she did.",
        "She doesn’t go to a movie unless she has the time.",
        "She hasn’t seen a movie for a long time."
        ],
        correct: 3
    },
    {
        question: "What does the woman say about Harvey?",
        audio: "../audio/no 20.mp3",
        answer: [
        "He turned around to answer the teacher’s questions.",
        "He is an intelligent student.",
        "He must have been embarrassed.",
        "He looked in the red book for the answer to the questions."
        ],
        correct: 2
    },
    {
        question: "What is the woman status at the university?",
        audio: "../audio/no 21.mp3",
        reading_q: "Long Conversation Question 21-24",
        answer: [
        "She’s a senior.",
        "She’s a junior.",
        "She’s a transfer student.",
        "She’s a graduate student."
        ],
        correct: 0
    },
    {
        question: "What does a man want to learn from the woman?",
        audio: "../audio/no 22.mp3",
        answer: [
        "How to transfer to a junior college.",
        "How to find his way around campus.",
        "The course requirements for a literature major.",
        "Who won the campus election."
        ],
        correct: 2
    },
    {
        question: "How many total courses must the student take for a literature major?",
        audio: "../audio/no 23.mp3",
        answer: [
        "Three.",
        "Five.",
        "Eight.",
        "Ten."
        ],
        correct: 2
    },
    {
        audio: "../audio/no 24.mp3",
        question: "The man would probably take his elective courses in which area?",
        answer: [
        "American literature.",
        "World literature.",
        "Literary analysis.",
        "Surveying."
        ],
        correct: 0
    },
    {
        question: "Where do the woman learn about dolphins?",
        reading_q: "Long Conversation Question 25-28",
        audio: "../audio/no 25.mp3",
        answer: [
            "In a book.",
            "From a television program.",
            "During a trip that she took.",
            "From a lecture."
        ],
        correct: 3
    },
    {
        question: "Why do dolphins use clicks?",
        audio: "../audio/no 26.mp3",
        answer: [
            "To communicate with other dolphins.",
            "To recognize objects in the water.",
            "To learn human language.",
            "To express fear."
        ],
        correct: 1
    },
    {
        question: "Approximately, how many human commands have some dolphins learned?",
        audio: "../audio/no 27.mp3",
        answer: [
            "Five.",
            "Fifteen.",
            "Fifty.",
            "Five hundred."
        ],
        correct: 2
    },
    {
        question: "What does the man say about dolphins intelligence?",
        audio: "../audio/no 28.mp3",
        answer: [
            "It is limited.",
            "It is greater than human intelligence.",
            "It is less than previously thought.",
            "We are beginning to learn how much they have."
        ],
        correct: 3
    },
    {
        question: "Where did this conversation most likely take place?",
        reading_q: "Long Conversation Question 29-30",
        audio: "../audio/no 29.mp3",
        answer: [
            "In a clothing store.",
            "In customs.",
            "At a bank.",
            "In a liquor store."
        ],
        correct: 1
    },
    {
        question: "How many countries did the woman visit?",
        audio: "../audio/no 30.mp3",
        answer: [
            "1",
            "2",
            "3",
            "4"
        ],
        correct: 1
    }

    ],
    structure: [
        {
            question: "Amanda Way’s career as a social reformer ____ in 1851 when, at an antislavery meeting in Indiana, she called for a state woman’s rights convention.",
            audio: "",
            answer: [
                'begin',
                'began',
                'have begun',
                'to have begun'
            ],
            correct: 1
        },
        {
            question: "The celesta, an orchestral percussion instrument, resembles ___",
            audio: "",
            answer: [
                'a small upright piano',
                'how a small upright piano',
                'a small upright piano is',
                'as a small upright piano'
            ],
            correct: 0
        },
        {
            question: "Thomas Paine, _____, wrote Common Sense, a pamphlet that identified the American colonies with the cause of liberty.",
            audio: "",
            answer: [
                'writer of eloquent',
                'whose eloquent writing',
                'an eloquent writer',
                'writing eloquent'
            ],
            correct: 2
        },
        {
            question: "Although beavers rarely remain submerged for more than two minutes, they can stay underwater ___ fifteen minutes before having to surface for air.",
            audio: "",
            answer: [
                'as long',
                'as long as',
                'so long',
                'so long that'
            ],
            correct: 1
        },
        {
            question: "Protein digestion begins in the stomach ____ ends in the small intestine.",
            audio: "",
            answer: [
                'while',
                'and',
                'how',
                'because'
            ],
            correct: 1
        },
        {
            question: "When natural gas burns, its ___ into atoms of carbon and hydrogen.",
            audio: "",
            answer: [
                'hydrocarbon molecules, breaking up',
                'broke up by hydrocarbon molecules',
                'hydrocarbon molecules break up',
                'broken up hydrocarbon molecules'
            ],
            correct: 2
        },
        {
            question: "_____ ballet dancers learn five basic positions for the arms and feet.",
            audio: "",
            answer: [
                'All of',
                'Of every',
                'All',
                'Every'
            ],
            correct: 2
        },
        {
            question: "Some colonies of bryozoans, small marine animals, form ___ with trailing stems.",
            audio: "",
            answer: [
                'creeping colonies',
                'which colonies creep',
                'creeping colonies are',
                'colonies creep'
            ],
            correct: 0
        },
        {
            question: "Ruth Bader Ginsburg argued six women’s rights cases before the United States Supreme Court in the 1970’s, ____",
            audio: "",
            answer: [
                'of five winning them',
                'five winning of them',
                'of them five winning',
                'winning five of them'
            ],
            correct: 3
        },
        {
            question: "Natural selection is defined as the process ___ the course of evolution by preserving those traits best adapted for an organism’s survival.",
            audio: "",
            answer: [
                'to which directs',
                'of which directs it',
                'directs it',
                'that directs'
            ],
            correct: 3
        },
        {
            question: "____ 363 miles between the cities of Albany and Buffalo in New York State, the Erie Canal helped link the Atlantic Ocean with the Great Lakes.",
            audio: "",
            answer: [
                'The extension of',
                'The extension',
                'Extending',
                'Extends'
            ],
            correct: 2
        },
        {
            question: "The chief sources of B12, a water-soluble vitamin ____ stored in the body, include meat, milk and eggs.",
            audio: "",
            answer: [
                'is not',
                'that is not',
                'not that is',
                'that not'
            ],
            correct: 1
        },
        {
            question: "____ is rooted in experiments in iron and steel conducted in the nineteenth century.",
            audio: "",
            answer: [
                'While the history of twentieth-century architecture',
                'The history of twentieth-century architecture',
                'That the history of twentieth-century architecture',
                'Both twentieth-century architecture and its history'
            ],
            correct: 1
        },
        {
            question: "The primary source of energy for tropical cyclones is the latent heat released when ____",
            audio: "",
            answer: [
                'does water vapor condense',
                'condensed water vapor',
                'water vapor condenses',
                'the condensation of water vapor'
            ],
            correct: 2
        },
        {
            question: "Manufacturing is Canada’s most important economic activity, ____17 percent of the workforce.",
            audio: "",
            answer: [
                'engages',
                'and to engage',
                'that it engage',
                'engaging'
            ],
            correct: 3
        },
        {
            question: "The professor gave a fascinating lecture, ___ everyone listened attentively.",
            audio: "",
            answer: [
                "whom",
                "that",
                "which",
                "to which"
            ],
            correct: 2
        },
        {
            question: "___ are considered sacred in many cultures.",
            audio: "",
            answer: [
                "Cows",
                "The cows",
                "A cow",
                "Cow"
            ],
            correct: 0
        },
        {
            question: "Not only ___ the book, but she also memorized all the important dates.",
            audio: "",
            answer: [
                "did she read",
                "she has read",
                "read she did",
                "she read"
            ],
            correct: 0
        },
        {
            question: "The more she practices, ___ she becomes.",
            audio: "",
            answer: [
                "the more confident",
                "more confident",
                "the most confident",
                "confident more"
            ],
            correct: 0
        },
        {
            question: "The teacher requested that the homework ___ by Friday.",
            audio: "",
            answer: [
                "is submitted",
                "was submitted",
                "be submitted",
                "submitting"
            ],
            correct: 2
        },
        {
            question: "Rarely ___ such a talented musician at a young age.",
            audio: "",
            answer: [
                "we see",
                "do we see",
                "we saw",
                "have we saw"
            ],
            correct: 1
        },
        {
            question: "Each of the students ___ given a copy of the syllabus.",
            audio: "",
            answer: [
                "were",
                "are",
                "is",
                "have"
            ],
            correct: 2
        },
        {
            question: "He acts as if he ___ everything.",
            audio: "",
            answer: [
                "knew",
                "knows",
                "know",
                "has known"
            ],
            correct: 0
        },
        {
            question: "A large quantity of water ___ needed to irrigate the crops.",
            audio: "",
            answer: [
                "are",
                "have been",
                "is",
                "were"
            ],
            correct: 2
        },
        {
            question: "It is essential that every applicant ___ the form clearly.",
            audio: "",
            answer: [
                "fill out",
                "fills out",
                "filled out",
                "filling out"
            ],
            correct: 0
        },
        {
            question: "Neither the students nor the teacher ___ available today.",
            audio: "",
            answer: [
                "are",
                "were",
                "is",
                "be"
            ],
            correct: 2
        },
        {
            question: "If I ___ more time, I would join the trip.",
            audio: "",
            answer: [
                "have",
                "had",
                "would have",
                "was having"
            ],
            correct: 1
        },
        {
            question: "This is the restaurant ___ we met for the first time.",
            audio: "",
            answer: [
                "which",
                "in which",
                "where",
                "there"
            ],
            correct: 2
        },
        {
            question: "Scarcely ___ the door when the phone rang.",
            audio: "",
            answer: [
                "he closed",
                "closed he",
                "had he closed",
                "has he closed"
            ],
            correct: 2
        },
        {
            question: "The manager insisted that she ___ on time.",
            audio: "",
            answer: [
                "is",
                "was",
                "be",
                "has been"
            ],
            correct: 2
        },
        {
            question: "The more you practice, ___ you will get.",
            audio: "",
            answer: [
                "the better",
                "better",
                "the best",
                "best"
            ],
            correct: 0
        },
        {
            question: "The book, along with the notes, ___ on the table.",
            audio: "",
            answer: [
                "were",
                "are",
                "is",
                "have been"
            ],
            correct: 2
        },
        {
            question: "Not until the next morning ___ the mistake.",
            audio: "",
            answer: [
                "we realized",
                "did we realize",
                "we realize",
                "realize we did"
            ],
            correct: 1
        },
        {
            question: "It was recommended that the student ___ his research.",
            audio: "",
            answer: [
                "continues",
                "continued",
                "continue",
                "has continued"
            ],
            correct: 2
        },
        {
            question: "She suggested that he ___ a break.",
            audio: "",
            answer: [
                "take",
                "takes",
                "took",
                "taken"
            ],
            correct: 0
        },
        {
            question: "No sooner ___ she finished the report than the manager asked for it.",
            audio: "",
            answer: [
                "has",
                "did",
                "was",
                "had"
            ],
            correct: 3
        },
        {
            question: "There was no one who ___ the secret.",
            audio: "",
            answer: [
                "knew",
                "knows",
                "know",
                "known"
            ],
            correct: 0
        },
        {
            question: "I will not go unless you ___ me.",
            audio: "",
            answer: [
                "invited",
                "invite",
                "invites",
                "inviting"
            ],
            correct: 1
        },
        {
            question: "By the time we arrive, the show ___ already started.",
            audio: "",
            answer: [
                "will",
                "has",
                "had",
                "will have"
            ],
            correct: 3
        },
        {
            question: "___ the heavy rain, the match continued.",
            audio: "",
            answer: [
                "Although",
                "Despite",
                "Even",
                "Because"
            ],
            correct: 1
        }
    ],

    reading: [
    {
        reading_q: " Questions 1-10 \n As Philadelphia grew from a small town into a city in the first half of the eighteenth century, it became an increasingly important marketing center for a vast and growing agricultural hinterland. Market days saw the crowded city even more crowded, as farmers from within a radius of 24 or more kilometers brought their sheep, cows, pigs, vegetables, cider, and other products for direct sale to the townspeople. The High Street Market was continuously enlarged throughout the period until 1736, when it reached from Front Street to Third. By 1745 New Market was opened on Second Street between Pine and Cedar. The next year the Callowhill Market began operation. Along with market days, the institution of twice yearly fairs persisted in Philadelphia even after similar trading days had been discontinued in other colonial cities. The fairs provided a means of bringing handmade goods from outlying places to would-be buyers in the city. Linens and stockings from Germantown, for example, were popular items.\n\nAuctions were another popular form of occasional trade. Because of the competition, retail merchants opposed these as well as the fairs. Although governmental attempts to eradicate fairs and auctions were less than successful, the ordinary course of economic development was on the merchants’ side, as increasing business specialization became the order of the day. Export merchants became differentiated from their importing counterparts, and specialty shops began to appear in addition to general stores selling a variety of goods.\n\nOne of the reasons Philadelphia’s merchants generally prospered was because the surrounding area was undergoing tremendous economic and demographic growth. They did their business, after all, in the capital city of the province. Not only did they cater to the governor and his circle, but citizens from all over the colony came to the capital for legislative sessions of the assembly and council and the meetings of the courts of justice.",
        question: "What does the passage mainly discuss?",
        answer: [
        "Philadelphia’s agriculture importance",
        "Philadelphia’s development as a marketing center",
        "The sale of imported goods in Philadelphia",
        "The administration of the city of Philadelphia"
        ],
        correct: 1
    },
    {
        question: "It can be inferred from the passage that new markets opened in Philadelphia because",
        answer: [
        "they provided more modern facilities than older markets",
        "the High Street Market was forced to close",
        "existing markets were unable to serve the growing population",
        "farmers wanted markets that were closer to the farms"
        ],
        correct: 2
    },
    {
        question: 'The word “hinterland” in line 3 is closest in meaning to',
        answer: [
        "tradition",
        "association",
        "produce",
        "region"
        ],
        correct: 3
    },
    {
        question: 'The word “it” in line 6 refers to',
        answer: [
        "the crowded city",
        "a radius",
        "the High Street Market",
        "the period"
        ],
        correct: 2
    },
    {
        question: 'The word “persisted” in line 9 is closest in meaning to',
        answer: [
        "returned",
        "started",
        "declined",
        "continued"
        ],
        correct: 3
    },
    {
        question: "According to the passage, fairs in Philadelphia were held",
        answer: [
        "on the same day as market days",
        "as often as possible",
        "a couple of times a year",
        "whenever the government allowed it"
        ],
        correct: 2
    },
    {
        question: "It can be inferred that the author mentions “Linens and stockings” in line 12 to show that they were items that",
        answer: [
        "retail merchants were not willing to sell",
        "were not available in the stores in Philadelphia",
        "were more popular in Germantown than in Philadelphia",
        "could easily be transported"
        ],
        correct: 3
    },
    {
        question: 'The word “eradicate” in line 16 is closest in meaning to',
        answer: [
        "eliminate",
        "exploit",
        "organize",
        "operate"
        ],
        correct: 0
    },
    {
        question: 'What does the author mean by stating in line 17 that “economic development was on the merchants’ side”?',
        answer: [
        "Merchants had a strong impact on economic expansion.",
        "Economic forces allowed merchants to prosper.",
        "Merchants had to work together to achieve economic independence",
        "Specialty shops near large markets were more likely to be economically successful."
        ],
        correct: 1
    },
    {
        question: 'The word “undergoing” in line 22 is closest in meaning to',
        answer: [
        "requesting",
        "experiencing",
        "repeating",
        "including"
        ],
        correct: 1
    },
    {
        reading_q: "Questions 11-22 \n Aviculturists, people who raise birds for commercial sale, have not yet learned how to simulate the natural incubation of parrot eggs in the wild.They continue to look for better ways to increase egg production and to improve chick survival rates.When parrots incubate their eggs in the wild, the temperature and humidity of the nest are controlled naturally.Heat is transferred from the bird’s skin to the top portion of the eggshell, leaving the sides and bottom of the egg at a cooler temperature.This temperature gradient may be vital to successful hatching.Nest construction can contribute to this temperature gradient.Nests of loosely arranged sticks, rocks, or dirt are cooler in temperature at the bottom where the egg contacts the nesting material.Such nests also act as humidity regulators by allowing rain to drain into the bottom sections of the nest so that the eggs are not in direct contact with the water.As the water that collects in the bottom of the nest evaporates, the water vapor rises and is heated by the incubating bird, which adds significant humidity to the incubation environment.In artificial incubation programs, aviculturists remove eggs from the nests of parrots and incubate them under laboratory conditions.Most commercial incubators heat the eggs fairly evenly from top to bottom, thus ignoring the bird’s method of natural incubation, and perhaps reducing the viability and survivability of the hatching chicks.When incubators are not used, aviculturists sometimes suspend wooden boxes outdoors to use as nests in which to place eggs.In areas where weather can become cold after eggs are laid, it is very important to maintain a deep foundation of nesting material to act as insulator against the cold bottom of the box.If eggs rest against the wooden bottom in extremely cold weather conditions, they can become chilled to a point where the embryo can no longer survive.Similarly, these boxes should be protected from direct sunlight to avoid high temperatures that are also fatal to the growing embryo.Nesting material should be added in sufficient amounts to avoid both extreme temperature situations mentioned above and assure that the eggs have a soft, secure place to rest.",
        question: "What is the main idea of the passage?",
        answer: [
        "Nesting material varies according to the parrots’ environment.",
        "Humidity is an important factor in incubating parrots’ eggs.",
        "Aviculturists have constructed the ideal nest box for parrots.",
        "Wild parrots’ nests provide information useful for artificial incubation."
        ],
        correct: 3
    },
    {
        question: "The word 'They' in line 2 refers to",
        answer: [
        "aviculturists",
        "birds",
        "eggs",
        "rates"
        ],
        correct: 0
    },
    {
        question: "According to paragraph 2, when the temperature of the sides and bottom of the egg are cooler than the top, then",
        answer: [
        "there may be a good chance for successful incubation",
        "the embryo will not develop normally",
        "the incubating parent moves the egg to a new position.",
        "the incubation process is slowed down"
        ],
        correct: 0
    },
    {
        question: "According to paragraph 2, sticks, rocks, or dirt are used to",
        answer: [
        "soften the bottom of the nest for the newly hatched chick",
        "hold the nest together",
        "help lower the temperature at the bottom of the nest",
        "make the nest bigger"
        ],
        correct: 2
    },
    {
        question: "According to paragraph 2, the construction of the nest allows water to",
        answer: [
        "provide a beneficial source of humidity",
        "loosen the materials at the bottom of the nest",
        "keep the nest in a clean condition",
        "touch the bottom of the eggs"
        ],
        correct: 0
    },
    {
        question: "All of the following are part of a parrot’s incubation method EXCEPT",
        answer: [
        "heating the water vapor as it rises from the bottom of the nest",
        "arranging nesting material at the bottom of the nest",
        "transferring heat from the parent to the top of the eggshell",
        "maintaining a constant temperature on the eggshell"
        ],
        correct: 3
    },
    {
        question: "The word 'suspend' in line 19 is closest in meaning to",
        answer: [
        "build",
        "paint",
        "hang",
        "move"
        ],
        correct: 2
    },
    {
        question: "The word 'fatal' in line 25 is closest in meaning to",
        answer: [
        "close",
        "deadly",
        "natural",
        "hot"
        ],
        correct: 1
    },
    {
        question: "The word 'secure' in line 27 is closest in meaning to",
        answer: [
        "fresh",
        "dim",
        "safe",
        "warm"
        ],
        correct: 2
    },
    {
        question: "According to paragraph 2, a deep foundation of nesting material provides",
        answer: [
        "a constant source of humidity",
        "a strong nest box",
        "more room for newly hatched chicks",
        "protection against cold weather"
        ],
        correct: 3
    },
    {
        question: "Which of the following is a problem with commercial incubators?",
        answer: [
        "They lack the natural temperature changes of the outdoors.",
        "They are unable to heat the eggs evenly",
        "They do not transfer heat to the egg in the same way the parent bird does.",
        "They are expensive to operate."
        ],
        correct: 2
    },
    {
        question: "Which of the following terms is defined in the passage?",
        answer: [
        "Aviculturists (line 1)",
        "Gradient (line 8)",
        "Incubation (line 15)",
        "Embryo (line 24)"
        ],
        correct: 0
    },
    {
        reading_q: " Questions 23-33 \n The mineral particles found in soil range in size from microscopic clay particles to large boulders. The most abundant particles—sand, silt, and clay—are the focus of examination in studies of soil texture. Texture is the term used to describe the composite sizes of particles in a soil sample, typically several representative handrails. To measure soil texture, the sand, silt, and clay particles are sorted out by size and weight. The weights of each size are then expressed as a percentage of the sample weight.In the field, soil texture can be estimated by extracting a handful of sod and squeezing the damp soil into three basic shapes: (1) cast, a lump formed by squeezing a sample in a clenched fist; (2) thread, a pencil shape formed by rolling soil between the palms; and(3) ribbon, a flattish shape formed by squeezing a small sample between the thumb and index finger.The behavioral characteristics of the soil when molded into each of these shapes, if they can be formed at all, provide the basis for a general textural classification.The behavior of the soil in the hand test is determined by the amount of clay in the sample.Clay particles are highly cohesive, and when dampened, behave as a plastic.Therefore the higher the clay content in a sample, the more refined and durable the shapes into which it can be molded.Another method of determining soil texture involves the use of devices called sediment sieves, screens built with a specified mesh size.When the soil is filtered through a group of sieves, each with a different mesh size, the particles become grouped in corresponding size categories.Each category can be weighed to make a textural determination.Although sieves work well for silt, sand, and larger particles, they are not appropriate for clay particles.Clay is far too small to sieve accurately; therefore, in soils with a high proportion of clay, the fine particles are measured on the basis of their settling velocity when suspended in water.Since clays settle so slowly, they are easily segregated from sand and silt.The water can be drawn off and evaporated, leaving a residue of clay, which can be weighed",
        question: "What does the passage mainly discuss?",
        answer: [
        "Characteristics of high quality soil",
        "Particles typically found in most soils",
        "How a high clay content affects the texture of soil",
        "Ways to determine the texture of soil"
        ],
        correct: 3
    },
    {
        question: "The author mentions “several representative handrails” in line 4 in order to show",
        answer: [
        "the range of soil samples",
        "the process by which soil is weighed",
        "the requirements for an adequate soil sample",
        "how small soil particles are"
        ],
        correct: 2
    },
    {
        question: "The phrase “sorted out” in line 5 is closest in meaning to",
        answer: [
        "mixed",
        "replaced",
        "carried",
        "separated"
        ],
        correct: 3
    },
    {
        question: "It can be inferred that the names of the three basic shapes mentioned in paragraph 2 reflect",
        answer: [
        "the way the soil is extracted",
        "the results of squeezing the soil",
        "the need to check more than one handful",
        "the difficulty of forming different shapes"
        ],
        correct: 1
    },
    {
        question: "The word “dampened” in line 15 is closest in meaning to",
        answer: [
        "damaged",
        "stretched",
        "moistened",
        "examined"
        ],
        correct: 2
    },
    {
        question: "Which of the following can be inferred from the passage about a soil sample with little or no clay in it?",
        answer: [
        "It is not very heavy.",
        "It may not hold its shape when molded.",
        "Its shape is durable",
        "Its texture cannot be classified"
        ],
        correct: 1
    },
    {
        question: "The word “they” in line 23 refers to",
        answer: [
        "categories",
        "sieves",
        "larger particles",
        "clay particles"
        ],
        correct: 3
    },
    {
        question: "It can be inferred from the passage that the sediment sieve has an advantage over the hand test in determining soil texture because",
        answer: [
        "using the sieve takes less time",
        "the sieve can measure clay",
        "less training is required to use the sieve",
        "the sieve allows for a more exact measure"
        ],
        correct: 3
    },
    {
        question: "During the procedure described in paragraph 3, when clay particles are placed into water they",
        answer: [
        "stick to the sides of the water container",
        "take some time to sink to the bottom",
        "separate into different sizes",
        "dissolve quickly"
        ],
        correct: 1
    },
    {
        question: "The word “fine” in line 24 is closest in meaning to",
        answer: [
        "tiny",
        "many",
        "excellent",
        "various"
        ],
        correct: 0
    },
    {
        question: "All of the following words are defined in the passage EXCEPT",
        answer: [
        "texture (line 3)",
        "ribbon (line 11)",
        "sediment sieves (line 19)",
        "evaporated (line 27)"
        ],
        correct: 3
    },
    {
        reading_q: "Questions 34-40 \n A number of factors related to the voice reveal the personality of the speaker. The first is the broad area of communication, which includes imparting information by use of language, communicating with a group or an individual, and specialized communication through performance.A person conveys thoughts and ideas through choice of words, by a tone of voice that is pleasant or unpleasant, gentle or harsh,by the rhythm that is inherent within the language itself, and by speech rhythms that are flowing and regular or uneven and hesitant, and finally, by the pitch and melody of the utterance.When speaking before a group, a person’s tone may indicate unsureness or fright, confidence or calm.At interpersonal levels, the tone may reflect ideas and feelings over and above the words chosen, or may belie them. Here the conversant’s tone can consciously or unconsciously reflect intuitive sympathy or antipathy, lack of concern or interest, fatigue, anxiety, enthusiasm or excitement,all of which are usually discernible by the acute listener.Public performance is a manner of communication that is highly specialized with its own techniques for obtaining effects by voice and/ or gesture.The motivation derived from the text, and in the case of singing, the music, in combination with the performer’s skills, personality, and ability to create empathy will determine the success of artistic, political, or pedagogic communication.  Second, the voice gives psychological clues to a person’s self- image, perception ofothers, and emotional health.Self - image can be indicated by a tone of voice that isconfident, pretentious, shy, aggressive, outgoing, or exuberant, to name only a few personality traits.Also the sound may give a clue to the facade or mask of that person, for example, a shy person hiding behind an overconfident front.How a speaker perceives the listener’s receptiveness, interest, or sympathy in any given conversation can drastically alter the tone of presentation, by encouraging or discouraging the speaker.Emotional health is evidenced in the voice by free and melodic sounds of the happy, by constricted and harsh sound of the angry, and by dull and lethargic qualities of the depressed.",
        question: "What does the passage mainly discuss?",
        answer: [
        "The function of the voice in performance",
        "The connection between voice and personality",
        "Communication styles",
        "The production of speech"
        ],
        correct: 1
    },
    {
        question: "What does the author mean by stating that “At interpersonal levels, tone may reflect ideas and feelings over and above the words chosen”?",
        answer: [
        "Feelings are expressed with different words than ideas are.",
        "The tone of voice can carry information beyond the meaning of words.",
        "A high tone of voice reflects an emotional communication.",
        "Feelings are more difficult to express than ideas."
        ],
        correct: 1
    },
    {
        question: "The word “Here” in line 10 refers to",
        answer: [
        "interpersonal interactions",
        "the tone",
        "ideas and feelings",
        "words chosen"
        ],
        correct: 0
    },
    {
        question: "The word “derived” in line 15 is closest in meaning to",
        answer: [
        "discussed",
        "prepared",
        "registered",
        "obtained"
        ],
        correct: 3
    },
    {
        question: "Why does the author mention “artistic, political, or pedagogic communication” in line 17?",
        answer: [
        "As examples of public performance",
        "As examples of basic styles of communication",
        "To contrast them to singing",
        "To introduce the idea of self-image"
        ],
        correct: 0
    },
    {
        question: "According to the passage, an exuberant tone of voice, may be an indication of a person’s",
        answer: [
        "general physical health",
        "personality",
        "ability to communicate",
        "vocal quality"
        ],
        correct: 1
    },
    {
        question: "According to the passage, an overconfident front may hide",
        answer: [
        "hostility",
        "shyness",
        "friendliness",
        "strength"
        ],
        correct: 1
    }
        ],
};

//======================================================================

// Timer durations for each section in seconds
// Pengaturan Durasi Setiap Bagian Tes
const SECTION_TIMERS = {
    listening: 40 * 60, // 40 minutes
    structure: 30 * 60, // 30 minutes
    reading: 50 * 60,   // 50 minutes
};

// Variabel Penting untuk Jalannya Tes

let currentSection = 'listening';
let current_q = 0;
let saved_answer = [];
let timer;
let timeLeft;
let total_score = 0;

// Skor Per Bagian (Raw)


let listening_score = 0;
let structure_score = 0;
let reading_score = 0;

// Referensi ke Elemen HTML

const openingWindow = document.getElementById('opening_window');
const quizWindow = document.getElementById('quiz_window');
const closingWindow = document.getElementById('closing_window');
const timerEl = document.getElementById('timer');
const questionEl = document.getElementById('question');
const readingQ = document.getElementById('reading_q');
const audioEl = document.getElementById('audio');
const scoreText = document.getElementById('score_text');

// Format Waktu yang Nyaman Dibaca

function formatTime(seconds) {
    const m = Math.floor(seconds / 60);
    const s = seconds % 60;
    return m + ":" + (s < 10 ? '0' : '') + s;
}


// Memulai Bagian Tes Tertentu
function startListening() {
    startSection('listening');
}

function startSection(section) {
    currentSection = section;
    current_q = 0;
    total_score = 0;
    saved_answer = new Array(DB_QUIZ[section].length).fill(4); // 4 means no answer
    timeLeft = SECTION_TIMERS[section];

    // Update opening window for next sections:
    if (section === 'listening') {
    openingWindow.innerHTML = `
        <h1>TOEFL Listening Section</h1>
        <p>Jumlah Soal: <b>${DB_QUIZ.listening.length}</b></p>
        <p>Waktu: <b>40 Menit</b></p>
        <button onclick="startListening()">Mulai Listening</button>`
    // Immediately start listening section on first run
    } else if (section === 'structure') {
    openingWindow.innerHTML = `
        <h2>TOEFL Structure Section</h2>
        <p>Jumlah Soal: <b>${DB_QUIZ.structure.length}</b></p>
        <p>Waktu: <b>30 Menit</b></p>
        <button onclick="startStructure()">Mulai Structure</button>`;
    closingWindow.classList.add('hidden');
    quizWindow.classList.add('hidden');
    openingWindow.classList.remove('hidden');
    return; // show opening for Structure first
    } else if (section === 'reading') {
    openingWindow.innerHTML = `
        <h2>TOEFL Reading Section</h2>
        <p>Jumlah Soal: <b>${DB_QUIZ.reading.length}</b></p>
        <p>Waktu: <b>50 Menit</b></p>
        <button onclick="startReading()">Mulai Reading</button>`;
    closingWindow.classList.add('hidden');
    quizWindow.classList.add('hidden');
    openingWindow.classList.remove('hidden');
    return; // show opening for Reading first
    }

    openingWindow.classList.add('hidden');
    closingWindow.classList.add('hidden');
    quizWindow.classList.remove('hidden');
    setupQuestion();
    startTimer();
}

function startStructure() {
    document.getElementById("section_name").innerText = "Structure";
    openingWindow.classList.add('hidden');
    closingWindow.classList.add('hidden');
    quizWindow.classList.remove('hidden');
    currentSection = 'structure';
    current_q = 0;
    total_score = 0;
    saved_answer = new Array(DB_QUIZ.structure.length).fill(4);
    timeLeft = SECTION_TIMERS.structure;
    setupQuestion();
    startTimer();
}




function startReading() {
    document.getElementById("section_name").innerText = "Reading";
    openingWindow.classList.add('hidden');
    closingWindow.classList.add('hidden');
    quizWindow.classList.remove('hidden');
    currentSection = 'reading';
    current_q = 0;
    total_score = 0;
    saved_answer = new Array(DB_QUIZ.reading.length).fill(4);
    timeLeft = SECTION_TIMERS.reading;
    setupQuestion();
    startTimer();
}

// Menampilkan Soal dan Pilihan Jawaban

function setupQuestion() {
    const currentData = DB_QUIZ[currentSection][current_q];
    questionEl.innerText = `${current_q + 1}. ${currentData.question}`;

    if (currentData.reading_q) {
        readingQ.style.display = "block";
        readingQ.innerText = `${currentData.reading_q}`;
    } else {
        readingQ.style.display = "none";
        readingQ.innerText = "";
    }

    if(currentData.audio) {
        audioEl.style.display = "block";
        audioEl.src = currentData.audio;
    } else {
        audioEl.style.display = "none";
        audioEl.src = "";
    }

    const optionLabels = ['A', 'B', 'C', 'D'];

    for (let i = 0; i < 4; i++) {
        const label = optionLabels[i];
        const text = currentData.answer[i];
        document.getElementById('choiceText' + i).innerText = `${label}. ${text}`;
        document.getElementById('choice' + i).checked = false;
    }

    if (saved_answer[current_q] !== undefined && saved_answer[current_q] !== 4) {
        document.getElementById('choice' + saved_answer[current_q]).checked = true;
    }
}


//Memulai dan Menampilkan Timer

function startTimer() {
    clearInterval(timer);
    timerEl.innerText = formatTime(timeLeft);
    timer = setInterval(() => {
    if(timeLeft <= 0) {
        clearInterval(timer);
        alert('Waktu habis untuk section ini!');
        stopQuiz();
    } else {
        timeLeft--;
        timerEl.innerText = formatTime(timeLeft);
    }
    }, 1000);
}

// Mengakhiri Sesi Tes

function stopQuiz() {
    saveAnswer();
    
    const confirmation = confirm("Apakah kamu yakin ingin mengakhiri sesi ini? Jawaban yang belum dikerjakan tidak akan dihitung.");
    if (!confirmation) return; // Batal keluar jika user menekan 'Batal'

    clearInterval(timer);
    checkScore();
    quizWindow.classList.add('hidden');
    closingWindow.classList.remove('hidden');

    // Simpan ke variabel sementara
    if (currentSection === 'listening') {
        listening_score = total_score;
    } else if (currentSection === 'structure') {
        structure_score = total_score;
    } else if (currentSection === 'reading') {
        reading_score = total_score;
    }

    const result = calculateTotalTOEFLScore(
        listening_score,
        structure_score,
        reading_score
    );
    scoreText.innerHTML = `
    <p>Jumlah Jawaban Benar: ${total_score}</p>
    <p>Skor Sementara: ${result.total}</p>
    `;
}


// Melanjutkan ke Bagian Tes Berikutnya

function nextSection() {

    if(currentSection === 'listening') {
    // Go to structure opening window
    startSection('structure');
    } else if(currentSection === 'structure') {
    // Go to reading opening window
    startSection('reading');
    } else {
        // Selesai semua section, simpan ke localStorage
        const today = new Date().toISOString().split('T')[0]; // YYYY-MM-DD

        localStorage.setItem('listening_score', listening_score);
        localStorage.setItem('structure_score', structure_score);
        localStorage.setItem('reading_score', reading_score);
        localStorage.setItem('completion_date', today);

        // Konversi skor
        const result = calculateTotalTOEFLScore(listening_score, structure_score, reading_score);

        // Simpan skor hasil konversi
        localStorage.setItem('listening_converted', result.listening);
        localStorage.setItem('structure_converted', result.structure);
        localStorage.setItem('reading_converted', result.reading);
        localStorage.setItem('total_toefl_score', result.total);
        localStorage.setItem('completion_date', today);
        simpanSkorTerbaruKeRiwayat();
        displayFinalScore();
    }
}

//  Menampilkan Hasil Akhir Tes

function displayFinalScore() {
    const listeningRaw = parseInt(localStorage.getItem('listening_score')) || 0;
    const structureRaw = parseInt(localStorage.getItem('structure_score')) || 0;
    const readingRaw = parseInt(localStorage.getItem('reading_score')) || 0;

    const listeningConv = parseInt(localStorage.getItem('listening_converted')) || 0;
    const structureConv = parseInt(localStorage.getItem('structure_converted')) || 0;
    const readingConv = parseInt(localStorage.getItem('reading_converted')) || 0;

    const finalScore = parseInt(localStorage.getItem('total_toefl_score')) || 0;
    const completionDate = localStorage.getItem('completion_date') || '-';

    closingWindow.innerHTML = `
        <h2>Tes Selesai</h2>
        <p><b>Jumlah Soal Benar:</b></p>
        <p>Listening: ${listeningRaw}</p>
        <p>Structure: ${structureRaw}</p>
        <p>Reading: ${readingRaw}</p>
        <p><b>Konversi Skor:</b></p>
        <p>Listening: ${listeningConv}</p>
        <p>Structure: ${structureConv}</p>
        <p>Reading: ${readingConv}</p>
        <h3>Skor Akhir: ${finalScore}</h3>
        <h4>Tanggal Tes: ${completionDate}</h4>
        <button onclick="exitQuiz()">Keluar</button>
    `;

    closingWindow.classList.remove('hidden');
    quizWindow.classList.add('hidden');
    openingWindow.classList.add('hidden');
}

//=== Fungsi Exit ===
//Fungsi Keluar dari Tes

    function exitQuiz() {
        alert("Terima kasih telah mengikuti tes!");
        window.location.href = "beranda.html";
    }

    function exitTest() {
    const confirmExit = confirm("Apakah Anda yakin ingin keluar dari tes?");
    if (confirmExit) {
        window.location.href = "beranda.html"; // Ganti sesuai halaman tujuan
    }
    }

//Menyimpan Jawaban Sementara

function saveAnswer() {
    const answer = document.querySelector('input[name="choice"]:checked');
    if (answer != null) {
    saved_answer[current_q] = parseInt(answer.getAttribute('data-id'));
    } else {
    saved_answer[current_q] = 4;
    }
}

// Mengecek dan Menghitung Skor Benar

function checkScore() {
    total_score = 0;
    for(let i = 0; i < saved_answer.length; i++) {
    if(saved_answer[i] === DB_QUIZ[currentSection][i].correct) {
        total_score ++;
    }
    }
}

// Navigasi Soal Sebelumnya dan Berikutnya

function prevQuestion() {
    saveAnswer();
    current_q--;
    if(current_q < 0) {
        current_q = 0
        alert('Anda sudah berada di soal pertama.')
    }
    setupQuestion();
}

function nextQuestion() {
    saveAnswer();
    current_q++;
    if(current_q > DB_QUIZ[currentSection].length - 1){
        current_q = DB_QUIZ[currentSection].length - 1
        alert('Anda sudah berada di soal terakhir.')
    }
        
    setupQuestion();
}

// If user refreshes page during test, no auto start. Show opening window.
//Tampilan Awal Saat Halaman Dimuat
document.addEventListener('DOMContentLoaded', () => {
    openingWindow.classList.remove('hidden');
    quizWindow.classList.add('hidden');
    closingWindow.classList.add('hidden');
});


//Konversi Skor Mentah ke Skala Resmi TOEFL

function convertListening(raw) {
    return Math.round((raw / DB_QUIZ['listening'].length) * (68 - 24) + 24); // skala 24–68
}

function convertStructure(raw) {
    return Math.round((raw / DB_QUIZ['structure'].length) * (68 - 20) + 20); // skala 20–68
}

function convertReading(raw) {
    return Math.round((raw / DB_QUIZ['reading'].length) * (67 - 21) + 21); // skala 21-37
}

//Hitung Skor Total TOEFL
function calculateTotalTOEFLScore(listeningRaw, structureRaw, readingRaw) {
    const L = convertListening(listeningRaw);
    const S = convertStructure(structureRaw);
    const R = convertReading(readingRaw);

    const total = Math.round(((L + S + R) / 3) * 10); // Total score 217 – 677
    return {
        listening: L,
        structure: S,
        reading: R,
        total
    };
}

//==== Membuat LocalStorage untuk riwayat ====
//Menyimpan Skor ke Riwayat Pengguna

function simpanSkorTerbaruKeRiwayat() {
    const dataBaru = {
        completion_date: localStorage.getItem("completion_date"),
        listening_converted: parseInt(localStorage.getItem("listening_converted") || 0),
        structure_converted: parseInt(localStorage.getItem("structure_converted") || 0),
        reading_converted: parseInt(localStorage.getItem("reading_converted") || 0),
        total_toefl_score: parseInt(localStorage.getItem("total_toefl_score") || 0)
    };

    if (!dataBaru.completion_date) {
        console.warn("Tidak ada data tes terbaru di localStorage.");
        return;
    }

    let riwayat = JSON.parse(localStorage.getItem("toefl_history")) || [];

    // Menambahkan data ke riwayat
    riwayat.push(dataBaru);
    localStorage.setItem("toefl_history", JSON.stringify(riwayat));
    console.log("Skor TOEFL terbaru berhasil ditambahkan ke riwayat.");
}